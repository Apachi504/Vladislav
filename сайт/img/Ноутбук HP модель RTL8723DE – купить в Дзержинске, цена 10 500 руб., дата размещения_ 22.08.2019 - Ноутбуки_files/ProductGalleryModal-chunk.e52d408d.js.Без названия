(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{1614:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=f(t(69)),o=f(t(79)),r=f(t(80)),a=f(t(187)),l=f(t(188));n.default=function(e){var n,t;return t=n=function(n){function t(){var e,n,i,r;(0,o.default)(this,t);for(var l=arguments.length,d=Array(l),s=0;s<l;s++)d[s]=arguments[s];return i=(0,a.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(d))),n=i,i.modalComponentRef=c.default.createRef(),r=n,(0,a.default)(i,r)}return(0,l.default)(t,n),(0,r.default)(t,[{key:"componentDidUpdate",value:function(e){var n=this.props,t=n.animationState,i=n.isStacked,o=n.isActive;o&&(t===s.ENTERED&&t!==e.animationState&&this.modalDidAppear(),e.isStacked&&!i&&this.modalDidAppear())}},{key:"modalDidAppear",value:function(){var e=this.modalComponentRef.current;e&&e.modalDidAppear&&e.modalDidAppear()}},{key:"render",value:function(){return c.default.createElement(e,(0,i.default)({ref:this.modalComponentRef},this.props))}}]),t}(c.default.Component),n.displayName=(0,u.default)(e,"withModalEvents"),n.propTypes={animationState:p.propTypeTransitionState.isRequired,isStacked:d.default.bool.isRequired,isActive:d.default.bool.isRequired},t};var c=f(t(0)),d=f(t(98)),s=t(25),p=t(162),u=f(t(1615));function f(e){return e&&e.__esModule?e:{default:e}}},1615:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(8);n.default=i.enhanceComponentName},1616:function(e,n,t){e.exports=t.p+"assets/close.ea064a.svg"},1617:function(e,n,t){e.exports=t.p+"assets/close.f89d06.svg"},1814:function(e,n,t){"use strict";t.r(n);var i=t(0),o=t.n(i),r=t(1163),a=t.n(r),l=t(9),c=t(1614),d=t.n(c),s=t(5),p=t(2),u=t(1406),f=t(1320),h=t(29),b=t(20),m=t(33),g=t(1160);s.FullscreenGallery;var y=Object(h.connect)(function(e){var n=Object(m.getIsMobileSelector)(e),t=Object(g.i)(n?b.ImagePreset.MIDDLE_L_OUT:b.ImagePreset.LARGE_S_OUT);return function(e,n){var i=n.productId;return{mediaBreakpoint:Object(m.getMediaBreakpointName)(e),images:t(e,{productId:i})}}})(s.FullscreenGallery),v=t(13),w=t(6),x=t(3),k=t(264),O=t(1616),C=t.n(O),I=_(["\n  ",";\n\n  overflow: hidden;\n  display: flex;\n  background: ",";\n  visibility: hidden;\n\n  ",";\n"],["\n  ",";\n\n  overflow: hidden;\n  display: flex;\n  background: ",";\n  visibility: hidden;\n\n  ",";\n"]),j=_(["\n  position: absolute;\n  top: 24px;\n  right: 80px;\n  left: 80px;\n\n  height: 40px;\n  line-height: 40px;\n  font-size: 30px;\n\n  text-align: center;\n  color: white;\n\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"],["\n  position: absolute;\n  top: 24px;\n  right: 80px;\n  left: 80px;\n\n  height: 40px;\n  line-height: 40px;\n  font-size: 30px;\n\n  text-align: center;\n  color: white;\n\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"]),R=_(["\n  position: absolute;\n  border: none;\n  margin: 0;\n  padding: 0;\n  outline: none;\n  cursor: pointer;\n"],["\n  position: absolute;\n  border: none;\n  margin: 0;\n  padding: 0;\n  outline: none;\n  cursor: pointer;\n"]),E=_(["\n  top: 16px;\n  left: 16px;\n\n  width: 48px;\n  padding-top: 48px;\n\n  font-size: 12px;\n  color: white;\n\n  background: transparent url(",") 0 0 no-repeat;\n\n  opacity: 0.64;\n  transition: opacity 0.2s;\n\n  :hover {\n    opacity: 1;\n  }\n\n  :after {\n    content: 'esc';\n  }\n"],["\n  top: 16px;\n  left: 16px;\n\n  width: 48px;\n  padding-top: 48px;\n\n  font-size: 12px;\n  color: white;\n\n  background: transparent url(",") 0 0 no-repeat;\n\n  opacity: 0.64;\n  transition: opacity 0.2s;\n\n  :hover {\n    opacity: 1;\n  }\n\n  :after {\n    content: 'esc';\n  }\n"]),B=_(["\n  position: relative;\n  flex-grow: 1;\n\n  ",";\n"],["\n  position: relative;\n  flex-grow: 1;\n\n  ",";\n"]),T=_(["\n      margin-right: 40px;\n    "],["\n      margin-right: 40px;\n    "]),q=_(["\n  background: white;\n  width: 344px;\n  height: 100%;\n"],["\n  background: white;\n  width: 344px;\n  height: 100%;\n"]),S=_(["\n  height: 100%;\n  width: 100%;\n  padding: 24px;\n  overflow: auto;\n"],["\n  height: 100%;\n  width: 100%;\n  padding: 24px;\n  overflow: auto;\n"]);function _(e,n){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var D=w.default.div(I,s.fullscreenFixed,function(e){return Object(x.rgba)(e.theme.palette.dark,.94)},k.a),P=Object(w.default)(s.Typography.H2)(j),M=w.default.button(R),H=Object(w.default)(M)(E,C.a),A=w.default.div(B,function(e){return e.maximized&&Object(w.css)(T)}),K=w.default.div(q),z=w.default.div(S),L=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();function V(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}var N=function(e){function n(){var e,t,i;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=i=V(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(r))),i.handleKeyDown=function(e){var n=e.keyCode,t=i.props,o=t.onLeftKeyDown,r=t.onRightKeyDown;switch(n){case v.KeyCodes.LEFT:o();break;case v.KeyCodes.RIGHT:r()}},V(i,t)}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,o.a.Component),L(n,[{key:"render",value:function(){var e=this.props,n=e.title,t=e.animationState,i=e.modalInnerRef,r=e.onCloseClick,a=e.info,l=e.children;return o.a.createElement(D,{"data-test-component":this.props["data-test-component"],state:t,ref:i,tabIndex:0,onKeyDown:this.handleKeyDown},o.a.createElement(A,null,o.a.createElement(P,{children:n}),l),o.a.createElement(K,null,o.a.createElement(z,null,a)),o.a.createElement(H,{onClick:r,"data-test-action":"CloseClick"}))}}]),n}(),F=N;N.propTypes={"data-test-component":a.a.string,title:a.a.string.isRequired,animationState:s.propTypeTransitionState.isRequired,modalInnerRef:s.propTypeRef,onLeftKeyDown:a.a.func.isRequired,onRightKeyDown:a.a.func.isRequired,onCloseClick:a.a.func.isRequired,info:a.a.element.isRequired,children:a.a.element.isRequired};var G=t(43);var U=Object(h.connect)(function(){var e=Object(G.B)();return function(n,t){var i=t.productId,o=e(n,{productId:i});return{title:o.name,isInfoButtonVisible:o.price<1e11}}})(F),W=t(1617),J=t.n(W),Q=ee(["\n  ",";\n\n  display: flex;\n  background: ",";\n  visibility: hidden;\n\n  ",";\n"],["\n  ",";\n\n  display: flex;\n  background: ",";\n  visibility: hidden;\n\n  ",";\n"]),X=ee(["\n  position: absolute;\n  display: block;\n  top: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n  height: 48px;\n  z-index: 2;\n  outline: none;\n  cursor: pointer;\n  border: none;\n  background: url(",") 16px 12px no-repeat;\n\n  ",";\n"],["\n  position: absolute;\n  display: block;\n  top: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n  height: 48px;\n  z-index: 2;\n  outline: none;\n  cursor: pointer;\n  border: none;\n  background: url(",") 16px 12px no-repeat;\n\n  ",";\n"]),Y=ee(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n\n  height: 48px;\n  padding: 12px 16px;\n  background: ",";\n\n  ",";\n"],["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n\n  height: 48px;\n  padding: 12px 16px;\n  background: ",";\n\n  ",";\n"]),Z=ee(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n\n  height: 80px;\n  padding: 12px 16px;\n  background: ",";\n\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  ",";\n"],["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n\n  height: 80px;\n  padding: 12px 16px;\n  background: ",";\n\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  ",";\n"]),$=ee(["\n  display: inline-block;\n  white-space: nowrap;\n  width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"],["\n  display: inline-block;\n  white-space: nowrap;\n  width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]);function ee(e,n){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var ne=w.default.div(Q,s.fullscreenFixed,function(e){return e.theme.palette.dark},k.a),te=w.default.button(X,J.a,s.hideable),ie=w.default.div(Y,function(e){return Object(x.rgba)(e.theme.palette.dark,.8)},s.hideable),oe=(w.default.div(Z,function(e){return Object(x.rgba)(e.theme.palette.dark,.8)},s.hideable),Object(w.default)(s.Typography.T2)($));function re(e){var n=e.isBuyerActionsVisible,t=e.isControlsHidden,i=e.actionButton,r=e.animationState,a=e.modalInnerRef,l=e.onCloseClick,c=e.children,d=e.title,p=e.price;return o.a.createElement(ne,{state:r,ref:a,"data-test-component":e["data-test-component"]},c,o.a.createElement(ie,{isHidden:t}),o.a.createElement(s.ActionBar,{isHidden:!n||t,info:o.a.createElement(o.a.Fragment,null,o.a.createElement(s.Typography.H4,{isWhite:!0},p),o.a.createElement(oe,{isWhite:!0},d)),action:i}),o.a.createElement(te,{onClick:t?void 0:l,"data-test-action":"CloseClick",isHidden:t}))}re.propTypes={"data-test-component":a.a.string,animationState:s.propTypeTransitionState.isRequired,isControlsHidden:a.a.bool.isRequired,isBuyerActionsVisible:a.a.bool.isRequired,modalInnerRef:s.propTypeRef,onCloseClick:a.a.func.isRequired,actionButton:a.a.element.isRequired,children:a.a.element.isRequired,title:a.a.string.isRequired,price:a.a.element.isRequired};var ae=Object(h.connect)(function(){var e=Object(G.B)(),n=Object(g.e)();return function(t,i){var o=i.productId,r=e(t,{productId:o}).name;return{isBuyerActionsVisible:n(t,{productId:o}),title:r}}})(re),le=t(1383),ce=t(18),de=t(19),se=t(1445),pe=t(1336),ue=t(1263),fe=t(1321);function he(e){var n=e.isChatPossible,t=e.onSendMessageClick,i=e.createChatHref,r=e.mediaBreakpoint,a=e.isPhoneButtonVisible,l=e.isChatButtonVisible,c=e.isModalOverCall,d=e.isMobile,u=e.productId,f=o.a.useCallback(function(e){e.preventDefault(),t()},[t]);return n&&l?o.a.createElement(s.Button,{href:i,onClick:f},p.mediaBreakpointLegacy.isTablet(r)?"Написать продавцу":"Написать"):a?o.a.createElement(fe.a,{isMobile:d,fullWidth:c,productId:u}):null}he.propTypes={isChatPossible:a.a.bool.isRequired,createChatHref:a.a.string.isRequired,mediaBreakpoint:s.propTypeMediaBreakpoint.isRequired,onSendMessageClick:a.a.func.isRequired,isPhoneButtonVisible:a.a.bool.isRequired,isChatButtonVisible:a.a.bool.isRequired,isModalOverCall:a.a.bool.isRequired,productId:a.a.string.isRequired,isMobile:a.a.bool};var be=Object(h.connect)(function(){var e=Object(G.B)(),n=Object(G.H)(),t=Object(le.a)(),i=Object(le.b)();return function(o,r){var a=r.productId,l=Object(ce.p)(o),c=e(o,{productId:a}).owner,d=n(o,{userId:c}).settings;return{isPhoneNumberPermitted:Object(ue.c)(o),isModalOverCall:Object(ue.b)(o),mediaBreakpoint:Object(m.getMediaBreakpointName)(o),createChatHref:de.a.imProduct(a),isChatPossible:d.displayChat&&l,isPhoneButtonVisible:i(o,{productId:a}),isChatButtonVisible:t(o,{productId:a})}}},function(e,n){var t=n.productId,i={label:"ProductGalleryModal"};return{onShowPhoneNumberClick:function(){return e(Object(se.a)(t,i))},onSendMessageClick:function(){return e(Object(pe.a)({productId:t,beContext:i}))}}})(he),me=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ge=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();function ye(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}var ve=function(e){function n(){var e,t,i;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=i=ye(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(r))),i.state={isControlsHidden:!1,activeImageIndex:i.props.initialModalData.imageIndex},i.handleSelectImage=function(e){return i.setState({activeImageIndex:e})},i.handleLeftKeyDown=function(){return i.setState(function(e){return{activeImageIndex:e.activeImageIndex-1}})},i.handleRightKeyDown=function(){return i.setState(function(e){return{activeImageIndex:e.activeImageIndex+1}})},i.handleClick=function(){return i.setState(function(e){return{isControlsHidden:!e.isControlsHidden}})},ye(i,t)}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,o.a.PureComponent),ge(n,[{key:"componentDidMount",value:function(){this.props.onShowReady()}},{key:"modalDidAppear",value:function(){var e=this.props.modalInnerRef;e&&e.current&&e.current.focus()}},{key:"render",value:function(){var e=this.props.initialModalData.productId,n=this.state.activeImageIndex,t=this.handleSelectImage,i=p.mediaBreakpointLegacy.isDesktop(this.props.mediaBreakpoint)?U:ae,r=this.state.isControlsHidden&&l.j;return o.a.createElement(i,me({},this.props,{"data-test-component":"ProductGalleryModal",onLeftKeyDown:this.handleLeftKeyDown,onRightKeyDown:this.handleRightKeyDown,productId:e,isControlsHidden:r,info:o.a.createElement(u.a,{productId:e,isTooltipModal:!0}),price:o.a.createElement(f.a,{productId:e}),actionButton:o.a.createElement(be,{productId:e})}),o.a.createElement(y,{isControlsHidden:r,onClick:this.handleClick,productId:e,activeImageIndex:n,onSelectImage:t}))}}]),n}();ve.propTypes={mediaBreakpoint:s.propTypeMediaBreakpoint.isRequired,onCloseClick:a.a.func.isRequired,onShowReady:a.a.func.isRequired,modalInnerRef:s.propTypeRef,initialModalData:a.a.shape({imageIndex:a.a.number,productId:s.propTypeId}).isRequired};var we=d()(ve);n.default=Object(h.connect)(function(e){return{mediaBreakpoint:Object(m.getMediaBreakpointName)(e)}})(we)}}]);